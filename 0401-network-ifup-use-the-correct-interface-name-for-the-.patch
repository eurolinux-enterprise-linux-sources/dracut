From 6e49e06cfec6f7e15b7711dd631a9c0b2326843b Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Wed, 9 Mar 2016 14:10:00 +0100
Subject: [PATCH] network/ifup: use the correct interface name for the vlan
 parent

There is no $phydevice. Use $netif instead.
---
 modules.d/40network/ifup | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/modules.d/40network/ifup b/modules.d/40network/ifup
index 183a9cf..9f8fc6f 100755
--- a/modules.d/40network/ifup
+++ b/modules.d/40network/ifup
@@ -124,9 +124,9 @@ if [ -z "$DO_VLAN_PHY" ] && [ -e /tmp/vlan.${netif}.phy ]; then
         [ -e "$i" ] || continue
         read vlanname < "$i"
         if [ -n "$vlanname" ]; then
-	    ip link set "$phydevice" up
-	    wait_for_if_up "$phydevice"
-            ip link add dev "$vlanname" link "$phydevice" type vlan id "$(get_vid $vlanname)"
+            ip link set "$netif" up
+            wait_for_if_up "$netif"
+            ip link add dev "$vlanname" link "$netif" type vlan id "$(get_vid $vlanname)"
             ifup "$vlanname"
         fi
     done
