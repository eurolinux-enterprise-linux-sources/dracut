From a10364d4ee4b739dae30570c2682f34cfb0b4ba3 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Wed, 20 Apr 2011 12:54:07 +0200
Subject: [PATCH] let rpc user own /var/lib/rpcbind

https://bugzilla.redhat.com/show_bug.cgi?id=698160
---
 modules.d/95nfs/install | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/modules.d/95nfs/install b/modules.d/95nfs/install
index 5d3c535..21f7ab6 100755
--- a/modules.d/95nfs/install
+++ b/modules.d/95nfs/install
@@ -41,7 +41,9 @@ egrep '^nfsnobody:' /etc/passwd >> "$initdir/etc/passwd"
 egrep '^rpc:' /etc/passwd >> "$initdir/etc/passwd"
 egrep '^rpcuser:' /etc/passwd >> "$initdir/etc/passwd"
 #which nologin >/dev/null 2>&1 && dracut_install nologin
+egrep '^rpc:' /etc/group >> "$initdir/etc/group"
 
 # rpc user needs to be able to write to this directory to save the warmstart
 # file
-chmod 777 "$initdir/var/lib/rpcbind"
+chmod 770 "$initdir/var/lib/rpcbind"
+chown rpc.rpc "$initdir/var/lib/rpcbind"
