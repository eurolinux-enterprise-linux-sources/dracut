From 90e189b04271d2775f8b6423ed9aa2950ba925e1 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 12 Oct 2012 11:55:42 +0200
Subject: [PATCH] network/netroot: don't copy empty dhcp files

---
 modules.d/40network/netroot | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules.d/40network/netroot b/modules.d/40network/netroot
index c2baaa9..bd0dc55 100755
--- a/modules.d/40network/netroot
+++ b/modules.d/40network/netroot
@@ -105,8 +105,8 @@ source_all netroot
 if $handler $netif $netroot $NEWROOT; then
     # Network rootfs mount successful
     for iface in $IFACES ; do
-	[ -f /tmp/dhclient.$iface.lease ] &&    cp /tmp/dhclient.$iface.lease    /tmp/net.$iface.lease
-	[ -f /tmp/dhclient.$iface.dhcpopts ] && cp /tmp/dhclient.$iface.dhcpopts /tmp/net.$iface.dhcpopts
+	[ -s /tmp/dhclient.$iface.lease ] &&    cp /tmp/dhclient.$iface.lease    /tmp/net.$iface.lease
+	[ -s /tmp/dhclient.$iface.dhcpopts ] && cp /tmp/dhclient.$iface.dhcpopts /tmp/net.$iface.dhcpopts
     done
 
     # Save used netif for later use
