From 386875cc9e26b3d0e5f969205bc0c35d86ca6186 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Tue, 19 Jan 2016 20:00:20 +0100
Subject: [PATCH] add more hyperv kernel modules

---
 modules.d/40network/installkernel        | 2 ++
 modules.d/90kernel-modules/installkernel | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/modules.d/40network/installkernel b/modules.d/40network/installkernel
index 0d0eb02..002e31b 100755
--- a/modules.d/40network/installkernel
+++ b/modules.d/40network/installkernel
@@ -19,3 +19,5 @@ instmods ipv6
 instmods 8021q
 # bonding
 instmods bonding
+# hyperv
+hostonly='' instmods hv_netvsc
diff --git a/modules.d/90kernel-modules/installkernel b/modules.d/90kernel-modules/installkernel
index a3e4641..51a72e1 100755
--- a/modules.d/90kernel-modules/installkernel
+++ b/modules.d/90kernel-modules/installkernel
@@ -10,7 +10,7 @@ if [[ -z $drivers ]]; then
     hostonly='' instmods usb_storage sdhci sdhci-pci
 
     # install keyboard support
-    hostonly='' instmods atkbd i8042 usbhid hid-apple ehci-hcd ohci-hcd uhci-hcd xhci-hcd hyperv_keyboard
+    hostonly='' instmods atkbd i8042 usbhid hid-apple ehci-hcd ohci-hcd uhci-hcd xhci-hcd hyperv_keyboard hid-hyperv
 
     instmods "=drivers/pcmcia" =ide "=drivers/usb/storage"
     instmods $(filter_kernel_modules block_module_test) 
