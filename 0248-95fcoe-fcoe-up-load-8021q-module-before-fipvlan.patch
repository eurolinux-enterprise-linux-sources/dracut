From 531df990495a6e82579c6c157afb334452ec1c25 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Thu, 6 Oct 2011 11:44:40 +0200
Subject: [PATCH] 95fcoe/fcoe-up: load 8021q module before fipvlan

https://bugzilla.redhat.com/show_bug.cgi?id=736094
---
 modules.d/95fcoe/fcoe-up | 1 +
 1 file changed, 1 insertion(+)

diff --git a/modules.d/95fcoe/fcoe-up b/modules.d/95fcoe/fcoe-up
index 6640200..ae5eeea 100755
--- a/modules.d/95fcoe/fcoe-up
+++ b/modules.d/95fcoe/fcoe-up
@@ -38,6 +38,7 @@ if [ "$dcb" = "dcb" ]; then
     fipvlan "$netif" -c -s
 elif [ "$netdriver" = "bnx2x" ]; then
     # If driver is bnx2x, do not use /sys/module/fcoe/parameters/create but fipvlan
+    modprobe 8021q
     fipvlan "$netif" -c -s
 else
     echo -n "$netif" > /sys/module/fcoe/parameters/create
