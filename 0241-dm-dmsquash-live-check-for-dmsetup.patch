From bb2981ef4e98e5109739b750c1f3051d3667c0ef Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Wed, 21 Sep 2011 13:11:27 +0200
Subject: [PATCH] dm/dmsquash-live: check for dmsetup

---
 modules.d/90dm/check            | 2 ++
 modules.d/90dmsquash-live/check | 1 +
 2 files changed, 3 insertions(+)

diff --git a/modules.d/90dm/check b/modules.d/90dm/check
index 008f04f..790211a 100755
--- a/modules.d/90dm/check
+++ b/modules.d/90dm/check
@@ -1,4 +1,6 @@
 #!/bin/bash
 
+which dmsetup >/dev/null 2>&1 || exit 1
+
 exit 255
 
diff --git a/modules.d/90dmsquash-live/check b/modules.d/90dmsquash-live/check
index ae7306e..8839564 100755
--- a/modules.d/90dmsquash-live/check
+++ b/modules.d/90dmsquash-live/check
@@ -1,4 +1,5 @@
 #!/bin/sh
+which dmsetup >/dev/null 2>&1 || exit 1
 
 # if dmsetup is not installed, then we cannot support fedora/red hat 
 # style live images
