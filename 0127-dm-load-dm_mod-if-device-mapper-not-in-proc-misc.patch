From 9426b6be6a6a809ba74fddfbd5d838477ee27c69 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Thu, 8 Jul 2010 16:18:09 +0200
Subject: [PATCH] dm: load dm_mod if device-mapper not in /proc/misc

---
 modules.d/90dm/dm-pre-udev.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/modules.d/90dm/dm-pre-udev.sh b/modules.d/90dm/dm-pre-udev.sh
index 8fdaeaf..dfa4541 100644
--- a/modules.d/90dm/dm-pre-udev.sh
+++ b/modules.d/90dm/dm-pre-udev.sh
@@ -1 +1 @@
-modprobe dm_mod 
+strstr "$(cat /proc/misc)" device-mapper || modprobe dm_mod 
