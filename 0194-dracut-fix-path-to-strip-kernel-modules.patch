From d35048572111653bb1c5dda6fecbd354237f87ba Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Wed, 6 Apr 2011 10:52:30 +0200
Subject: [PATCH] dracut: fix path to strip kernel modules

https://bugzilla.redhat.com/show_bug.cgi?id=691944
---
 dracut | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/dracut b/dracut
index d271c56..5f0c162 100755
--- a/dracut
+++ b/dracut
@@ -294,7 +294,7 @@ if [[ $do_strip = yes ]] ; then
 fi
 
 if [[ $do_strip = yes ]] ; then
-    for f in $(find "$initdir" -type f \( -perm -0100 -or -perm -0010 -or -perm -0001 -or -path '/lib/modules/*.ko' \) ); do
+    for f in $(find "$initdir" -type f \( -perm -0100 -or -perm -0010 -or -perm -0001 -or -path '*/lib/modules/*.ko' \) ); do
 	dinfo "Stripping $f"
 	strip -g "$f" 2>/dev/null|| :
         #
