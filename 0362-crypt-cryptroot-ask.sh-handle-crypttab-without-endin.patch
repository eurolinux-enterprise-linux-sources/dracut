From 3559c0b6cf2340bfcfbb783aeca5de406e6f8dd0 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Tue, 3 Mar 2015 10:56:43 +0100
Subject: [PATCH] crypt/cryptroot-ask.sh: handle crypttab without ending
 newline

https://bugzilla.redhat.com/show_bug.cgi?id=1085562
---
 modules.d/90crypt/cryptroot-ask.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/modules.d/90crypt/cryptroot-ask.sh b/modules.d/90crypt/cryptroot-ask.sh
index 585bbdc..de2f20d 100755
--- a/modules.d/90crypt/cryptroot-ask.sh
+++ b/modules.d/90crypt/cryptroot-ask.sh
@@ -34,7 +34,7 @@ fi
 
 # TODO: improve to support what cmdline does
 if [ -f /etc/crypttab ] && ! getargs rd_NO_CRYPTTAB; then
-    while read name dev luksfile rest; do
+    while read name dev luksfile rest || [ -n "$name" ] ; do
         # ignore blank lines and comments
         if [ -z "$name" -o "${name#\#}" != "$name" ]; then
             continue
