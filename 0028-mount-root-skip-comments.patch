From f01253ac3acf579d6cd575768fa653b249206c96 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Thu, 18 Feb 2010 17:46:01 +0100
Subject: [PATCH] mount-root: skip comments

---
 modules.d/95rootfs-block/mount-root.sh | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/modules.d/95rootfs-block/mount-root.sh b/modules.d/95rootfs-block/mount-root.sh
index 2b4c785..0ac156d 100755
--- a/modules.d/95rootfs-block/mount-root.sh
+++ b/modules.d/95rootfs-block/mount-root.sh
@@ -36,6 +36,9 @@ if [ -n "$root" -a -z "${root%%block:*}" ]; then
 	rootfs="auto"
 	rootopts="defaults"
 	while read dev mp fs opts rest; do 
+            # skip comments
+            [ "${dev%%#*}" != "$dev" ] && continue
+            
             if [ "$mp" = "/" ]; then
 		rootfs=$fs
 		rootopts=$opts
