From 3bbd0c7764473eab96b74c447e2dff605a8098f5 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 12 Oct 2012 11:54:07 +0200
Subject: [PATCH] network/parse-ip-opts.sh: relax bootdev handling

---
 modules.d/40network/parse-ip-opts.sh | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

diff --git a/modules.d/40network/parse-ip-opts.sh b/modules.d/40network/parse-ip-opts.sh
index 7af44b9..4960c7e 100755
--- a/modules.d/40network/parse-ip-opts.sh
+++ b/modules.d/40network/parse-ip-opts.sh
@@ -48,9 +48,10 @@ if [ "$netroot" = "dhcp" ] || [ "$netroot" = "dhcp6" ]; then
 fi
 
 # If needed, check if bootdev= contains anything usable
+BOOTDEV=$(getarg bootdev=)
+
 if [ -n "$NEEDBOOTDEV" ] ; then
-    BOOTDEV=$(getarg bootdev=) || die "Please supply bootdev argument for multiple ip= lines"
-    [ -z "$BOOTDEV" ] && die "Bootdev argument is empty"
+    [ -z "$BOOTDEV" ] && warn "Please supply bootdev argument for multiple ip= lines"
 fi
 
 if [ "ibft" = "$(getarg ip=)" ]; then
@@ -145,9 +146,6 @@ for p in $(getargs ip=); do
 	IFACES="$IFACES $dev"
     fi
 
-    # Small optimization for udev rules
-    [ -z "$NEEDBOOTDEV" ] && [ -n "$dev" ] && BOOTDEV=$dev
-
     # Do we need to check for specific options?
     if [ -n "$NEEDDHCP" ] || [ -n "$DHCPORSERVER" ] ; then
 	# Correct device? (Empty is ok as well)
