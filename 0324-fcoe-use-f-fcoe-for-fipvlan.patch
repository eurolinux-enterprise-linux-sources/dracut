From 77d76bad4d32317ad969a54d2dec9a16fb42ff42 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Thu, 29 Aug 2013 14:26:50 +0200
Subject: [PATCH] fcoe: use -f "-fcoe" for fipvlan

https://bugzilla.redhat.com/show_bug.cgi?id=866150
---
 modules.d/95fcoe/fcoe-up | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules.d/95fcoe/fcoe-up b/modules.d/95fcoe/fcoe-up
index 74f8693..b782f11 100755
--- a/modules.d/95fcoe/fcoe-up
+++ b/modules.d/95fcoe/fcoe-up
@@ -35,14 +35,14 @@ if [ "$dcb" = "dcb" ]; then
     sleep 1
     dcbtool sc "$netif" app:fcoe e:1 a:1 w:1
     sleep 1
-    fipvlan "$netif" -c -s
+    fipvlan "$netif" -c -s -f "-fcoe"
 elif [ "$netdriver" = "bnx2x" ]; then
     # If driver is bnx2x, do not use /sys/module/fcoe/parameters/create but fipvlan
     modprobe 8021q
     udevadm settle --timeout=30 >/dev/null 2>&1
     # Sleep for 3 s to allow dcb negotiation
     sleep 3
-    fipvlan "$netif" -c -s
+    fipvlan "$netif" -c -s -f "-fcoe"
 else
     echo -n "$netif" > /sys/module/fcoe/parameters/create
 fi
