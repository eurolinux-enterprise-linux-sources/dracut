From 13c5bb8e637432db8c1c83751f256d64eab094a6 Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Thu, 10 Jun 2010 13:51:40 +0200
Subject: [PATCH] lvm: install lvm mirror and snaphot libs

---
 modules.d/90lvm/install | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/modules.d/90lvm/install b/modules.d/90lvm/install
index 706c2c2..0813486 100755
--- a/modules.d/90lvm/install
+++ b/modules.d/90lvm/install
@@ -16,3 +16,14 @@ inst_rules 10-dm.rules 13-dm-disk.rules 95-dm-notify.rules 11-dm-lvm.rules
 
 inst "$moddir/lvm_scan.sh" /sbin/lvm_scan
 inst_hook cmdline 30 "$moddir/parse-lvm.sh"
+
+
+if ldd $(which lvm) | grep -q lib64; then
+    LIBDIR="/lib64"
+else
+    LIBDIR="/lib"
+fi
+
+for i in $(ls /{usr,}/$LIBDIR/libdevmapper-event-lvm*.so 2>/dev/null); do
+    dracut_install $i
+done
