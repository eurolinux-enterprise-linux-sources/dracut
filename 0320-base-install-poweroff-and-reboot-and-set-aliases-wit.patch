From 85dde6406dffa6ca2e361062b34849abbd09b1ac Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 26 Jul 2013 10:25:28 +0200
Subject: [PATCH] base: install poweroff and reboot and set aliases with "-f"

---
 modules.d/99base/install | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/modules.d/99base/install b/modules.d/99base/install
index bf51fc5..51fa131 100755
--- a/modules.d/99base/install
+++ b/modules.d/99base/install
@@ -1,11 +1,17 @@
 #!/bin/bash
 dracut_install mount mknod mkdir modprobe pidof sleep chroot \
-    sed ls flock cp mv dmesg rm ln rmmod mkfifo
+    sed ls flock cp mv dmesg rm ln rmmod mkfifo poweroff reboot
 dracut_install -o less
 if [ ! -e "${initdir}/bin/sh" ]; then
     dracut_install bash
     (ln -s bash "${initdir}/bin/sh" || :)
 fi
+
+{
+    echo 'alias reboot="reboot -f"'
+    echo 'alias poweroff="poweroff -f"'
+} >> "${initdir}/etc/profile"
+
 # install our scripts and hooks
 inst "$moddir/init" "/init"
 inst "$moddir/initqueue" "/sbin/initqueue"
