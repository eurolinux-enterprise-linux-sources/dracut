From d344f44317f7e3448e62586c347f066b41c82c2f Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 11 Jun 2010 13:16:36 +0200
Subject: [PATCH] network: strip pxelinux hardware type field from BOOTIF

---
 modules.d/40network/net-genrules.sh | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/modules.d/40network/net-genrules.sh b/modules.d/40network/net-genrules.sh
index 10d6ecd..7a26909 100755
--- a/modules.d/40network/net-genrules.sh
+++ b/modules.d/40network/net-genrules.sh
@@ -6,6 +6,8 @@ fix_bootif() {
     local IFS='-'
     macaddr=$(for i in ${macaddr} ; do echo -n $i:; done)
     macaddr=${macaddr%:}
+    # strip hardware type field from pxelinux
+    [ -n "${macaddr%??:??:??:??:??:??}" ] && macaddr=${macaddr#??:}
     echo $macaddr
 }
 
