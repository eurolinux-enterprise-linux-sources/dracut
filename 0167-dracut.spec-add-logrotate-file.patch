From 75cffbd155c6255d179a8212d481969ff6170b6c Mon Sep 17 00:00:00 2001
From: Harald Hoyer <harald@redhat.com>
Date: Fri, 25 Feb 2011 12:50:42 +0100
Subject: [PATCH] dracut.spec: add logrotate file

---
 dracut.logrotate | 7 +++++++
 dracut.spec      | 4 ++++
 2 files changed, 11 insertions(+)
 create mode 100644 dracut.logrotate

diff --git a/dracut.logrotate b/dracut.logrotate
new file mode 100644
index 0000000..e7d4f0a
--- /dev/null
+++ b/dracut.logrotate
@@ -0,0 +1,7 @@
+/var/log/dracut.log {
+    missingok
+    notifempty
+    size 30k
+    yearly
+    create 0600 root root
+}
diff --git a/dracut.spec b/dracut.spec
index b78fcb2..11a63da 100644
--- a/dracut.spec
+++ b/dracut.spec
@@ -162,6 +162,9 @@ rm $RPM_BUILD_ROOT/sbin/mkinitrd
 rm $RPM_BUILD_ROOT/sbin/lsinitrd
 %endif
 
+mkdir -p $RPM_BUILD_ROOT/etc/logrotate.d/dracut
+install -m 0644 dracut.logrotate $RPM_BUILD_ROOT/etc/logrotate.d/dracut
+
 %clean
 rm -rf $RPM_BUILD_ROOT
 
@@ -180,6 +183,7 @@ rm -rf $RPM_BUILD_ROOT
 %{_datadir}/dracut/dracut-functions
 %config(noreplace) /etc/dracut.conf
 %dir /etc/dracut.conf.d
+%config(noreplace) /etc/logrotate.d/dracut
 %{_mandir}/man8/dracut.8*
 %{_mandir}/man5/dracut.conf.5*
 %{_datadir}/dracut/modules.d/00dash
